<!--History not synced-->
<mat-card *ngIf="(isSynced === false)" class="no-data">
	<mat-card-title>
		Synchronise your activities
	</mat-card-title>
	<mat-card-content>
		<div>
			Please synchronize your activities to turn on "Fitness Trend" feature.
		</div>

		<div>
			You can synchronize by clicking on
			<mat-icon>sync_disabled</mat-icon>
			icon in the upper toolbar. The activities will be locally saved in the storage allocated by the extension.
		</div>

		<div>
			This fitness trend is "Multi-sports" oriented. Whatever the sport, it's strongly recommended that you hold a
			<i>heart rate monitor</i>, and/or a <i>power meter</i> for cycling. These sensors will provide accurate
			stress scores and thus an accurate fitness trend.
		</div>

		<div>
			What if you don't have sensors? If you don't have sensors (e.g. smart-phone only) or you missed them for
			some activities, your fitness trend can still be approximated from estimated running and cycling stress
			scores. For this you have to setup your own <strong>Running Functional Threshold Pace</strong> as a runner
			in athlete settings. And as a cyclist, your <strong>Cycling Functional Threshold Power</strong> (always in
			athlete settings).
		</div>

		<div>
			This fitness trend is an improved feature of the Stravaâ„¢ premium one, not a duplicate!
		</div>

		<div>The fitness trend is based on an impulse-response model by <i>Dr. Eric W. Banister</i>
			in 1975 and <i>Andrew R. Coggan</i> later. The following references has been used:
			<a href="http://fellrnr.com/wiki/Modeling_Human_Performance" target="_blank">Modeling Human
				Performance, fellrnr.com</a>
		</div>

		<div>
			Please read <a href="https://github.com/thomaschampagne/stravistix/wiki/Frequently-Asked-Questions"
						   target="_blank">Frequently Asked Questions</a>
		</div>

	</mat-card-content>
</mat-card>

<!--History not compliant with the feature-->
<mat-card *ngIf="(areSyncedActivitiesCompliant === false && isSynced !== false)" class="no-data">
	<mat-card-title>
		Unable to generate your fitness trend from synced activities and feature configuration
		<!--Your synced activities are not supported by this feature-->
	</mat-card-title>
	<mat-card-content>

		<div>
			Please verify that your synced activities have at least:
			<ul>
				<li>
					A running or cycling activity with or without sensors.
				</li>
				<li>
					An activity recorded with a heart rate monitor (no matter the sport type).
				</li>
				<li>
					A swimming activity having distance & time data.
				</li>
			</ul>
		</div>

		<div>
			<mat-icon color="warn" [style.vertical-align]="'middle'">warning</mat-icon>
			You may also changed the fitness trend configuration with exclusion patterns and date that are probably too
			restrictive.
			<button mat-icon-button color="primary" (click)="onOpenFitnessTrendConfig()">
				<mat-icon>settings</mat-icon>
				Verify your fitness trend configuration
			</button>
		</div>

	</mat-card-content>
</mat-card>

<!--Loading-->
<mat-card *ngIf="(isSynced !== false && areSyncedActivitiesCompliant === null)">
	<mat-card-content>
		<mat-progress-bar mode="buffer"></mat-progress-bar>
	</mat-card-content>
</mat-card>

<mat-card *ngIf="(areSyncedActivitiesCompliant === true)">
	<mat-card-content>
		<div fxLayout="row" fxLayout.lt-lg="column" fxLayoutAlign="start start">
			<app-fitness-trend-inputs #fitnessTrendInputs
									  fxFlex="35" fxFill fxLayout="column" fxLayoutAlign="start start"
									  [dateMin]="dateMin"
									  [dateMax]="dateMax"
									  [lastPeriods]="lastPeriods"
									  [periodViewed]="periodViewed"
									  [lastPeriodViewed]="lastPeriodViewed"
									  [lastFitnessActiveDate]="lastFitnessActiveDate"
									  [fitnessUserSettingsModel]="fitnessUserSettingsModel"
									  [fitnessTrendConfigModel]="fitnessTrendConfigModel"
									  [isTrainingZonesEnabled]="isTrainingZonesEnabled"
									  [isPowerMeterEnabled]="isPowerMeterEnabled"
									  [isSwimEnabled]="isSwimEnabled"
									  [isEBikeRidesEnabled]="isEBikeRidesEnabled"
									  [hasCyclingFtp]="hasCyclingFtp"
									  [hasRunningFtp]="hasRunningFtp"
									  (periodViewedChange)="onPeriodViewedChange($event)"
									  (openFitnessTrendConfigRequest)="onOpenFitnessTrendConfig()"
									  (trainingZonesToggleChange)="onTrainingZonesToggleChange($event)"
									  (powerMeterToggleChange)="onPowerMeterToggleChange($event)"
									  (swimToggleChange)="onSwimToggleChange($event)"
									  (eBikeRidesToggleChange)="onEBikeRidesToggleChange($event)">
			</app-fitness-trend-inputs>

			<app-fitness-trend-legend fxFlex="65" fxFill fxLayout="row" fxLayoutAlign="end end" class="mat-subheading-2"
									  [isTrainingZonesEnabled]="isTrainingZonesEnabled"></app-fitness-trend-legend>

		</div>

		<app-fitness-trend-graph [fitnessTrend]="fitnessTrend"
								 [dateMin]="dateMin"
								 [dateMax]="dateMax"
								 [periodViewed]="periodViewed"
								 [isTrainingZonesEnabled]="isTrainingZonesEnabled">
		</app-fitness-trend-graph>

		<div class="notes" (click)="onOpenFitnessTrendConfig(true)">
			<span
				*ngIf="(hasCyclingFtp && isPowerMeterEnabled && fitnessTrendConfigModel.allowEstimatedPowerStressScore)"
				matTooltip="Power Stress Score Estimation is currently enabled. You can disable it from feature config (click that text or on above cog icon to open it).">
				Power Stress Scores Estimation is <span class="estimationEnabled">ON</span>&nbsp;<mat-icon
				[inline]="true">info</mat-icon>
			</span>
			<span
				*ngIf="!(hasCyclingFtp && isPowerMeterEnabled && fitnessTrendConfigModel.allowEstimatedPowerStressScore)"
				matTooltip="Power Stress Score Estimation is currently disabled. You can enable it from feature config (click that text or on above cog icon to open it).
				Note: A Cycling Functional Threshold Power (FTP) is required in athlete settings. Also the power meter
				data toggle (thunderbolt icon just above) must be switched ON.">
				Power Stress Scores Estimation is <span class="estimationDisabled">OFF</span>&nbsp;<mat-icon
				[inline]="true">info</mat-icon>
			</span>
			&nbsp;&nbsp;&nbsp;&nbsp;
			<span *ngIf="(hasRunningFtp && fitnessTrendConfigModel.allowEstimatedRunningStressScore)"
				  matTooltip="Running Stress Score Estimation is currently enabled. You can disable it from feature config (click that text or on above cog icon to open it).">
				Running Stress Score Estimation is <span class="estimationEnabled">ON</span>&nbsp;<mat-icon
				[inline]="true">info</mat-icon>
			</span>
			<span *ngIf="!(hasRunningFtp && fitnessTrendConfigModel.allowEstimatedRunningStressScore)"
				  matTooltip="Running Stress Score Estimation is currently disabled. You can enable it from feature config (click that text or on above cog icon to open it).
					Note: A Running Functional Threshold Pace is required in athlete settings.">
				Running Stress Score Estimation is <span class="estimationDisabled">OFF</span>&nbsp;<mat-icon
				[inline]="true">info</mat-icon>
			</span>
		</div>

	</mat-card-content>
</mat-card>

<mat-card [style.visibility]="((areSyncedActivitiesCompliant === true) ? 'visible' : 'hidden')">
	<mat-card-title>
		Fitness analysis table
	</mat-card-title>
	<mat-card-content>
		<app-fitness-trend-table [fitnessTrend]="fitnessTrend"
								 [fitnessTrendConfigModel]="fitnessTrendConfigModel"
								 [isTrainingZonesEnabled]="isTrainingZonesEnabled"
								 [isPowerMeterEnabled]="isPowerMeterEnabled"
								 [isSwimEnabled]="isSwimEnabled"
								 [hasCyclingFtp]="hasCyclingFtp"
								 [hasRunningFtp]="hasRunningFtp">
		</app-fitness-trend-table>
	</mat-card-content>
</mat-card>
